<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin - Gigas</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; display: flex; height: 100vh; background: #f5f6fa; }
    .sidebar { width: 240px; background: #1e1e2f; color: white; display: flex; flex-direction: column; padding: 20px 0; }
    .sidebar h2 { text-align: center; margin-bottom: 30px; font-size: 20px; color: #ffd700; }
    .sidebar a { padding: 12px 20px; text-decoration: none; color: white; display: block; transition: 0.3s; }
    .sidebar a:hover, .sidebar a.active { background: #33334d; border-left: 4px solid #ffd700; }
    .main { flex-grow: 1; padding: 20px; overflow-y: auto; }
    .main h2 { margin-bottom: 20px; color: #333; }
    .cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
    .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); text-align: center; }
    .card h3 { margin: 0; font-size: 18px; color: #555; }
    .card p { font-size: 22px; margin: 10px 0 0; font-weight: bold; color: #0056d6; }
    canvas { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
    th { background: #0056d6; color: white; }
  </style>
</head>
<body>
  <!-- Menu Lateral -->
  <div class="sidebar">
    <h2>⚡ Gigas Admin</h2>
    <a href="#" class="active" onclick="mostrar('dashboard')">📊 Dashboard</a>
    <a href="#" onclick="mostrar('financeiro')">💰 Financeiro</a>
    <a href="#" onclick="mostrar('estoque')">📦 Estoque</a>
    <a href="#" onclick="mostrar('clientes')">👥 Clientes</a>
    <a href="#" onclick="mostrar('config')">⚙️ Configurações</a>
  </div>

  <!-- Conteúdo -->
  <div class="main">
    <!-- Dashboard -->
    <div id="dashboard" class="conteudo">
      <h2>📊 Dashboard</h2>
      <div class="cards">
        <div class="card"><h3>Vendas Hoje</h3><p id="vendasHoje">R$ 0</p></div>
        <div class="card"><h3>Pedidos</h3><p id="totalPedidos">0</p></div>
        <div class="card"><h3>Clientes</h3><p id="totalClientes">0</p></div>
        <div class="card"><h3>Estoque Baixo</h3><p id="estoqueBaixo">0</p></div>
      </div>
      <canvas id="graficoVendas" height="120"></canvas>
    </div>

    <!-- Financeiro -->
    <div id="financeiro" class="conteudo" style="display:none;">
      <h2>💰 Financeiro</h2>
      <p>Total Faturado: <b id="totalFaturado">R$ 0</b></p>
      <table>
        <thead><tr><th>Pedido</th><th>Cliente</th><th>Valor</th></tr></thead>
        <tbody id="tabelaFinanceiro"></tbody>
      </table>
    </div>

    <!-- Estoque -->
    <div id="estoque" class="conteudo" style="display:none;">
      <h2>📦 Estoque</h2>
      <table>
        <thead><tr><th>Produto</th><th>Preço</th><th>Ações</th></tr></thead>
        <tbody id="tabelaEstoque"></tbody>
      </table>
    </div>

    <!-- Clientes -->
    <div id="clientes" class="conteudo" style="display:none;">
      <h2>👥 Clientes</h2>
      <table>
        <thead><tr><th>Nome</th><th>Email</th><th>Endereço</th></tr></thead>
        <tbody id="tabelaClientes"></tbody>
      </table>
    </div>

    <!-- Configurações -->
    <div id="config" class="conteudo" style="display:none;">
      <h2>⚙️ Configurações</h2>
      <p>Configurações gerais da loja...</p>
    </div>
  </div>

  <script>
    function mostrar(secao) {
      document.querySelectorAll('.conteudo').forEach(div => div.style.display = 'none');
      document.getElementById(secao).style.display = 'block';
      document.querySelectorAll('.sidebar a').forEach(a => a.classList.remove('active'));
      document.querySelector(`.sidebar a[onclick="mostrar('${secao}')"]`).classList.add('active');
    }

    // Carregar dados
    const pedidos = JSON.parse(localStorage.getItem("pedidos")) || [];
    const clientes = JSON.parse(localStorage.getItem("clientes")) || [];
    const produtos = JSON.parse(localStorage.getItem("produtos")) || [];

    // Dashboard
    document.getElementById("totalPedidos").innerText = pedidos.length;
    document.getElementById("totalClientes").innerText = clientes.length;
    document.getElementById("estoqueBaixo").innerText = produtos.filter(p => p.qtd <= 2).length;

    let totalHoje = pedidos.reduce((soma, p) => soma + p.total, 0);
    document.getElementById("vendasHoje").innerText = "R$ " + totalHoje.toFixed(2);

    // Financeiro
    let totalFaturado = 0;
    pedidos.forEach((p, i) => {
      let tr = `<tr><td>#${i+1}</td><td>${p.cliente}</td><td>R$ ${p.total.toFixed(2)}</td></tr>`;
      document.getElementById("tabelaFinanceiro").innerHTML += tr;
      totalFaturado += p.total;
    });
    document.getElementById("totalFaturado").innerText = "R$ " + totalFaturado.toFixed(2);

    // Estoque
    produtos.forEach((p, i) => {
      let tr = `<tr>
                  <td>${p.nome}</td>
                  <td>R$ ${p.preco.toFixed(2)}</td>
                  <td><button onclick="editarProduto(${i})">Editar</button> <button onclick="excluirProduto(${i})">Excluir</button></td>
                </tr>`;
      document.getElementById("tabelaEstoque").innerHTML += tr;
    });

    // Clientes
    clientes.forEach(c => {
      let tr = `<tr><td>${c.nome}</td><td>${c.email}</td><td>${c.endereco}</td></tr>`;
      document.getElementById("tabelaClientes").innerHTML += tr;
    });

    // Funções estoque
    function editarProduto(i) {
      alert("Editar produto: " + produtos[i].nome);
    }
    function excluirProduto(i) {
      if(confirm("Excluir " + produtos[i].nome + "?")) {
        produtos.splice(i,1);
        localStorage.setItem("produtos", JSON.stringify(produtos));
        location.reload();
      }
    }

    // Gráfico
    const ctx = document.getElementById('graficoVendas').getContext('2d');
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: pedidos.map((_, i) => "Pedido " + (i+1)),
        datasets: [{
          label: "Vendas (R$)",
          data: pedidos.map(p => p.total),
          backgroundColor: "rgba(0,86,214,0.6)"
        }]
      },
      options: { responsive: true }
    });
    <button class="back" onclick="window.location.href='home.html'">⬅ voltar </button>
  </div>

  </script>
  
</body>
</html>
